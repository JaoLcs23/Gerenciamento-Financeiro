<?xml version="1.0" encoding="UTF-8"?>

<!-- ============================================================ -->
<!-- CategoryView.fxml - VERSÃO COMPLETA CORRIGIDA               -->
<!-- Correções: Layout reorganizado, ícones sem sobreposição     -->
<!-- ============================================================ -->

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.ColumnConstraints?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.controle.view.CategoryController"
            styleClass="root">

    <!-- ============ CABEÇALHO ============ -->
    <top>
        <VBox alignment="CENTER">
            <children>
                <Label fx:id="fullScreenHintLabel"
                       styleClass="full-screen-hint-label"
                       text=""
                       visible="false" />
                <Label text="GERENCIAMENTO DE CATEGORIAS"
                       styleClass="label-title" />
            </children>
        </VBox>
    </top>

    <padding>
        <Insets top="0" right="50" bottom="20" left="50"/>
    </padding>

    <!-- ============ CONTEÚDO CENTRAL ============ -->
    <center>
        <VBox alignment="TOP_CENTER" spacing="20">

            <!-- FORMULÁRIO: CAMPOS + BOTÕES EM LINHA -->
            <HBox spacing="20" alignment="CENTER">

                <!-- COLUNA ESQUERDA: Campos de entrada -->
                <VBox spacing="5" HBox.hgrow="ALWAYS" prefWidth="350">
                    <TextField fx:id="categoryNameField"
                               promptText="Nome da Categoria"
                               styleClass="text-field"
                               prefHeight="40"/>
                    <Label fx:id="categoryNameErrorLabel"
                           styleClass="error-message-label"
                           minHeight="15"/>

                    <ComboBox fx:id="categoryTypeComboBox"
                              promptText="Tipo"
                              styleClass="combo-box"
                              prefHeight="40"
                              maxWidth="Infinity"/>
                    <Label fx:id="categoryTypeErrorLabel"
                           styleClass="error-message-label"
                           minHeight="15"/>
                </VBox>

                <!-- COLUNA DIREITA: Botões em grade 2x2 -->
                <GridPane hgap="15" vgap="15">
                    <columnConstraints>
                        <ColumnConstraints hgrow="ALWAYS" minWidth="140" prefWidth="140"/>
                        <ColumnConstraints hgrow="ALWAYS" minWidth="140" prefWidth="140"/>
                    </columnConstraints>

                    <!-- LINHA 1: ADICIONAR | ATUALIZAR -->
                    <Button fx:id="addCategoryButton"
                            text="ADICIONAR"
                            onAction="#handleAddOrUpdateCategory"
                            styleClass="button, button-green"
                            prefWidth="140"
                            prefHeight="50"
                            GridPane.columnIndex="0"
                            GridPane.rowIndex="0">
                        <graphic>
                            <Region styleClass="form-icon, icon-add" />
                        </graphic>
                    </Button>

                    <Button fx:id="updateCategoryButton"
                            text="ATUALIZAR"
                            onAction="#handleAddOrUpdateCategory"
                            disable="true"
                            styleClass="button"
                            prefWidth="140"
                            prefHeight="50"
                            GridPane.columnIndex="1"
                            GridPane.rowIndex="0">
                        <graphic>
                            <Region styleClass="form-icon, icon-update" />
                        </graphic>
                    </Button>

                    <!-- LINHA 2: LIMPAR | EXCLUIR -->
                    <Button fx:id="newCategoryButton"
                            text="LIMPAR"
                            onAction="#handleNewCategory"
                            styleClass="button"
                            prefWidth="140"
                            prefHeight="50"
                            GridPane.columnIndex="0"
                            GridPane.rowIndex="1">
                        <graphic>
                            <Region styleClass="form-icon, icon-clear" />
                        </graphic>
                    </Button>

                    <Button fx:id="deleteCategoryButton"
                            text="EXCLUIR"
                            onAction="#handleDeleteCategory"
                            disable="true"
                            styleClass="button, button-red"
                            prefWidth="140"
                            prefHeight="50"
                            GridPane.columnIndex="1"
                            GridPane.rowIndex="1">
                        <graphic>
                            <Region styleClass="form-icon, icon-delete" />
                        </graphic>
                    </Button>
                </GridPane>

            </HBox>

            <!-- TABELA DE CATEGORIAS -->
            <Label text="Categorias Cadastradas"
                   styleClass="label-section-header"/>
            <TableView fx:id="categoryTable"
                       VBox.vgrow="ALWAYS"
                       styleClass="table-view"
                       prefHeight="400">
                <columns>
                    <TableColumn fx:id="colId"
                                 text="ID"
                                 prefWidth="70.0"/>
                    <TableColumn fx:id="colName"
                                 text="Nome"
                                 prefWidth="400.0"/>
                    <TableColumn fx:id="colType"
                                 text="Tipo"
                                 prefWidth="150.0"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                </columnResizePolicy>
            </TableView>
        </VBox>
    </center>

    <!-- ============ RODAPÉ ============ -->
    <bottom>
        <HBox alignment="CENTER" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="20" bottom="20" />
            </padding>
            <Button onAction="#handleGoBack"
                    text="VOLTAR AO MENU PRINCIPAL"
                    styleClass="button, button-green">
                <graphic>
                    <Region styleClass="form-icon, icon-home" />
                </graphic>
            </Button>
        </HBox>
    </bottom>
</BorderPane>